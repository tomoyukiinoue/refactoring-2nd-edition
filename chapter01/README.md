# 第1章 リファクタリング - 最初の例

この章では、`TypeScript` を使用してリファクタリングの経過をコミットしながら学習していきます。

## システム環境

```
$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.14.6
BuildVersion:   18G103

$ node -v
v12.14.1

$ npm -v
6.14.4
```

## インストール方法

```
$ npm install
```

## 実行方法

```
$ npm run start
```

## テスト方法

```
$ npm run test
```

---
## スタート時点

### 例
- 各種イベントに劇団員を派遣して演劇のパフォーマンスを行う会社
- 顧客が劇を選択し、席数や演じた劇に応じて会社が請求する。
- 現在、悲劇と喜劇の2種類を提供している。
- ボリューム特典ポイントがある。

#### ファイル構成
|ファイル|役割|
|---|---|
| `statement.ts` | 請求書を出力する。請求書には、顧客が選択した席数や演劇に応じて、合計金額、内訳、ボリューム特典ポイントを出力する。 |
| `plays.json` | 演劇に関するデータ |
| `nivoices.json` | 請求に関するデータ |

## statement関数の分割


### play変数の削除


### ボリューム特典ポイントの計算部分の抽出


### format変数の削除


### ボリューム特典ポイント集計箇所の削除


## 計算とフォーマットにフェーズを分割


## 型による計算処理の再編成


### PerformanceCalculator の作成


### 関数を PerformanceCalculator に移動


### PerformanceCalculator をポーリもフィックに


## まとめ

